{"version":3,"sources":["api.tsx","useSunsetData.ts","usePosition.ts","App.tsx","index.tsx"],"names":["mapResponseData","sunrise","sunset","solar_noon","day_length","civil_twilight_begin","civil_twilight_end","nautical_twilight_begin","nautical_twilight_end","astronomical_twilight_begin","astronomical_twilight_end","Date","getSunsetData","position","a","latitude","coords","longitude","Error","fetch","response","json","sunsetResponse","status","results","useSunsetData","useState","data","setData","isFetched","setFetched","setPosition","error","setError","useEffect","navigator","geolocation","getCurrentPosition","currentLocation","e","enableHighAccuracy","timeout","maximumAge","usePosition","sunsetData","fetchSunTime","App","className","role","aria-label","toLocaleTimeString","renderData","Object","keys","join","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"kOAEMA,EAAkB,SAAC,GAWc,IAVrCC,EAUoC,EAVpCA,QACAC,EASoC,EATpCA,OACAC,EAQoC,EARpCA,WACAC,EAOoC,EAPpCA,WACAC,EAMoC,EANpCA,qBACAC,EAKoC,EALpCA,mBACAC,EAIoC,EAJpCA,wBACAC,EAGoC,EAHpCA,sBACAC,EAEoC,EAFpCA,4BACAC,EACoC,EADpCA,0BAEA,MAAO,CACLP,aACAC,aACAH,QAAS,IAAIU,KAAKV,GAClBC,OAAQ,IAAIS,KAAKT,GACjBG,qBAAsB,IAAIM,KAAKN,GAC/BC,mBAAoB,IAAIK,KAAKL,GAC7BC,wBAAyB,IAAII,KAAKJ,GAClCC,sBAAuB,IAAIG,KAAKH,GAChCC,4BAA6B,IAAIE,KAAKF,GACtCC,0BAA2B,IAAIC,KAAKD,KAI3BE,EAAa,uCAAG,WAC3BC,GAD2B,qBAAAC,EAAA,yDAGrBC,EAHqB,OAGVF,QAHU,IAGVA,OAHU,EAGVA,EAAUG,OAAOD,SAC5BE,EAJqB,OAITJ,QAJS,IAITA,OAJS,EAITA,EAAUG,OAAOC,UAE9BF,GAAaE,EANS,sBAOnB,IAAIC,MAAM,iCAPS,uBAUJC,MAAM,uDAAD,OAC6BJ,EAD7B,uBAC6CF,QAD7C,IAC6CA,OAD7C,EAC6CA,EAAUG,OAAOC,YAX/D,cAUrBG,EAVqB,gBAaGA,EAASC,OAbZ,UAeG,QAFxBC,EAbqB,QAeRC,OAfQ,uBAgBnB,IAAIL,MACR,6CAA+CI,EAAeC,QAjBvC,iCAqBpBvB,EAAgBsB,EAAeE,UArBX,4CAAH,sDCvBX,SAASC,IAKrB,IAAD,EACwBC,qBADxB,mBACOC,EADP,KACaC,EADb,OAEgCF,oBAAS,GAFzC,mBAEOG,EAFP,KAEkBC,EAFlB,OCRa,WAAwB,IAAD,EACJJ,qBADI,mBAC7Bb,EAD6B,KACnBkB,EADmB,OAEVL,qBAFU,mBAE7BM,EAF6B,KAEtBC,EAFsB,KAkBpC,OAdAC,qBAAU,WACRC,UAAUC,YAAYC,oBACpB,SAACC,GACCP,EAAYO,MAEd,SAACC,GAAD,OAAON,EAASM,KAChB,CACEC,oBAAoB,EACpBC,QAAS,IACTC,WAAY,MAGf,IAEI,CAAE7B,WAAUmB,SDPSW,GAApB9B,EAHR,EAGQA,SAAUmB,EAHlB,EAGkBA,MAHlB,4CAKA,WAA4BM,GAA5B,eAAAxB,EAAA,sEAEIgB,GAAW,GAFf,SAI6BlB,EAAc0B,GAJ3C,OAIUM,EAJV,OAMIhB,EAAQgB,GANZ,uBAQId,GAAW,GARf,wEALA,sBAwBA,OAPAI,qBAAU,WACHrB,GAlBP,oCAqBEgC,CAAahC,KACZ,CAACA,IAEG,CAAEc,OAAME,YAAWhB,WAAUmB,SEOvBc,MApCf,WAAgB,IAAD,EACgCrB,IAArCE,EADK,EACLA,KAAME,EADD,EACCA,UAAWhB,EADZ,EACYA,SAAUmB,EADtB,EACsBA,MAuBnC,OACE,yBAAKe,UAAU,OACb,4BAAQA,UAAU,eACdlC,GAAY,+DACbgB,GAAa,0CACbF,GA1BY,SAACiB,GAA4B,IACtC3C,EAAoB2C,EAApB3C,QAASC,EAAW0C,EAAX1C,OAEjB,OACE,oCACE,2BACE,0BAAM8C,KAAK,MAAMC,aAAW,WAA5B,gBADF,YAIYhD,EAAQiD,qBAAsB,KAE1C,2BACE,0BAAMF,KAAK,MAAMC,aAAW,UAA5B,gBADF,WAIW/C,EAAOgD,qBAAsB,MAW/BC,CAAWxB,GACnBK,GAASoB,OAAOC,KAAKrB,GAAOsB,KAAK,QC9B1CC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,U","file":"static/js/main.af364bdb.chunk.js","sourcesContent":["import { SunsetResponse, SunsetData, SunsetResponseData } from \"./types\";\n\nconst mapResponseData = ({\n  sunrise,\n  sunset,\n  solar_noon,\n  day_length,\n  civil_twilight_begin,\n  civil_twilight_end,\n  nautical_twilight_begin,\n  nautical_twilight_end,\n  astronomical_twilight_begin,\n  astronomical_twilight_end,\n}: SunsetResponseData): SunsetData => {\n  return {\n    solar_noon,\n    day_length,\n    sunrise: new Date(sunrise),\n    sunset: new Date(sunset),\n    civil_twilight_begin: new Date(civil_twilight_begin),\n    civil_twilight_end: new Date(civil_twilight_end),\n    nautical_twilight_begin: new Date(nautical_twilight_begin),\n    nautical_twilight_end: new Date(nautical_twilight_end),\n    astronomical_twilight_begin: new Date(astronomical_twilight_begin),\n    astronomical_twilight_end: new Date(astronomical_twilight_end),\n  };\n};\n\nexport const getSunsetData = async (\n  position: Position\n): Promise<SunsetData> => {\n  const latitude = position?.coords.latitude;\n  const longitude = position?.coords.longitude;\n\n  if (!latitude || !longitude) {\n    throw new Error(\"Coordinates is not specified.\");\n  }\n\n  const response = await fetch(\n    `https://api.sunrise-sunset.org/json?formatted=0&lat=${latitude}&lng=${position?.coords.longitude}`\n  );\n  const sunsetResponse = (await response.json()) as SunsetResponse;\n\n  if (sunsetResponse.status !== \"OK\") {\n    throw new Error(\n      \"Error while getting data from api. Error: \" + sunsetResponse.status\n    );\n  }\n\n  return mapResponseData(sunsetResponse.results);\n};\n","import { useEffect, useState } from \"react\";\nimport { getSunsetData } from \"./api\";\nimport { SunsetData } from \"./types\";\nimport usePosition from \"./usePosition\";\n\nexport default function useSunsetData(): {\n  data: SunsetData | undefined;\n  isFetched: boolean;\n  position: Position | undefined;\n  error: any | undefined;\n} {\n  const [data, setData] = useState<SunsetData>();\n  const [isFetched, setFetched] = useState(false);\n  const { position, error } = usePosition();\n\n  async function fetchSunTime(currentLocation: Position) {\n    try {\n      setFetched(true);\n\n      const sunsetData = await getSunsetData(currentLocation);\n\n      setData(sunsetData);\n    } finally {\n      setFetched(false);\n    }\n  }\n\n  useEffect(() => {\n    if (!position) {\n      return;\n    }\n    fetchSunTime(position);\n  }, [position]);\n\n  return { data, isFetched, position, error };\n}\n","import { useEffect, useState } from \"react\";\n\nexport default function usePosition() {\n  const [position, setPosition] = useState<Position>();\n  const [error, setError] = useState<any>();\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(\n      (currentLocation) => {\n        setPosition(currentLocation);\n      },\n      (e) => setError(e),\n      {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 0,\n      }\n    );\n  }, []);\n\n  return { position, error };\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport { SunsetData } from \"./types\";\nimport useSunsetData from \"./useSunsetData\";\n\nfunction App() {\n  const { data, isFetched, position, error } = useSunsetData();\n\n  const renderData = (sunsetData: SunsetData) => {\n    const { sunrise, sunset } = sunsetData;\n\n    return (\n      <>\n        <p>\n          <span role=\"img\" aria-label=\"Sunrise\">\n            ðŸŒ„\n          </span>\n          Sunrise: {sunrise.toLocaleTimeString()}{\" \"}\n        </p>\n        <p>\n          <span role=\"img\" aria-label=\"Sunset\">\n            ðŸŒ‡\n          </span>\n          Sunset: {sunset.toLocaleTimeString()}{\" \"}\n        </p>\n      </>\n    );\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        {!position && <p>Allow browser use Your location.</p>}\n        {isFetched && <p>fetching...</p>}\n        {data && renderData(data)}\n        {error && Object.keys(error).join(\",\")}\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}